# scripts
This directory contains various scripts used by the pipeline.
However, you can use most of these scripts on their own, too. Some may even be helpful in day-to-day use.

All python scripts implement the `--help` argument. For R scripts, you can run `head <script>` to read about their usage.

### [analyze_map.py](analyze_map.py)
A python script to analyze the output of the pipeline and calculate metrics that might be useful for downstream biological applications of our software. This script is __not__, in fact, part of the pipeline.

### [benchmark.py](benchmark.py)
A python script for summarizing the runtime and memory usage of the pipeline based on its benchmark files. This script is __not__, in fact, part of the pipeline.

### [classify_test.R](classify_test.R)
An R script for predicting variants using a trained classifier. It takes as input a model generated by `classify_train.R`.

### [classify_train.R](classify_train.R)
An R script for creating a trained classifier. It takes as input a set of plant segments that have already been labeled by their species.

### [create_truth_data.py](create_truth_data.py)
A python script that splits a set of pre-labeled segments into truth and training sets, for use by `classify_test.R` and `classify_train.R`.

### [export_dem.py](export_dem.py)
A python script that extracts the elevation of each point in an orthomosaic from a Metashape project file. Elevation values are calculated by Metashape's digital elevation model. This script is __not__, in fact, part of the pipeline.

### [export_ortho.py](export_ortho.py)
A python script that exports the orthomosaic from a Metashape project file to a standard image file.

### [extract_coordinates.py](extract_coordinates.py)
A python script that converts orthomosaic pixel coordinates to geographic coordinates using the Metashape project file. It can also be used for extracting the center of each segment in a json segments file (also in geographic coordinates). This script is __not__, in fact, part of the pipeline.

### [extract_features.py](extract_features.py)
A python script for extracting machine learning features for each segmented region in a json segments file.

### [features.py](features.py)
A suite of python functions for calculating features. These functions are used primarily by `extract_features.py`.

### [images_with_segment.bash](images_with_segment.bash)
A bash script that finds all of the original drone images that have a plant, provided the plant's segment ID. This script uses the output of a step in the experimental strategy. This script is __not__, in fact, part of the pipeline.

### [import_labelme.py](import_labelme.py)
A python module for importing segments from a json labelme file. The functions in this module are used by many other scripts.

### [importance_plot.py](importance_plot.py)
A python script for visualizing the random forest importance of each machine learning feature. This script uses the output of `classify_train.R`. This script is __not__, in fact, part of the pipeline.

### [map.py](map.py)
A python script for visualizing the output of the pipeline via a map.

### [metrics.py](metrics.py)
A python script to calculate scoring metrics to evaluate the performance of the classifier. This script uses the output of `classify_test.R`.

### [prc.py](prc.py)
A python script for creating a precision-recall curve for the classified segments from `classify_test.R`. It uses the output of `statistics.py`.

### [resolve_conflicts.py](resolve_conflicts.py)
A python script for resolving conflicting species labels assigned to the same segments.

### [rev_transform.py](rev_transform.py)
A python script that transforms orthomosaic pixel coordinates to their coordinates in the original drone images.

### [segment.py](segment.py)
A python script that uses computer vision algorithms to identify the location of plants in an image. The script outputs both regions that it is highly confident contain plants and regions that it is less confident about.

### [statistics.py](statistics.py)
A python script that creates the points of a precision-recall curve. This script's output is used by `prc.py`.

### [stitch.py](stitch.py)
A python script that uses Agisoft Metashape to create an orthomosaic from a collection of overlapping drone images. The output of this script is a special Metashape project file, not the orthomosaic as a standard image file.

### [test_util.py](test_util.py)
A python script that can be useful for debugging the segmentation scripts: `segment.py` and `watershed.py`. This script is __not__, in fact, part of the pipeline.

### [transform.py](transform.py)
A python script that transforms pixel coordinates in the original drone iamges to their coordinates in the orthomosaic.

### [watershed.py](watershed.py)
A python script that uses the high and low confidence regions from `segment.py` in the watershed algorithm. It outputs its best guess for the location of each plant as a segments file.

